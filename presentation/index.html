<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title> Beer, Meditation & Railway Oriented Programming </title>

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/theme/black.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>

<body>
    <div class="reveal">
        <div class="slides">

            <!-- Slide 1: Title -->
            <section>
                <h4> Beer, Meditation & Railway Oriented Programming </h4>
                <p> By Moko Sharma </p>
            </section>

            <!-- Slide 2: About Me -->
            <section>
                <h4> About Me </h4>
                <ul class="center">
                    <li>
                        <p class="fragment" data-fragment-index="1"> Graduated </br> [ May 2015 ] </p>
                    </li>
                    <li>
                        <p class="fragment" data-fragment-index="2"> Developer @ SIG </br> [ August 2015 ] </p>
                    </li>
                    <li>
                        <p class="fragment" data-fragment-index="3"> Discovered F# </br> [ December 2015 ] </p>
                    </li>
                    <li>
                        <p class="fragment" data-fragment-index="4"> Became an Enemy of Mutable State </br> [ First Null Reference Exception ] </p>
                    </li>
                    <img src="media/NullReferenceException1.png" class="fragment" data-fragment-index="5" style="position:absolute;top:30%;left:30%;" />
            </section>

            <!-- Slide 3: Agenda -->
            <section>
                <h4> Agenda </h4>
                </br>
                <ol>
                    <li>
                        <p class="fragment" data-fragment-index="1"> ROP </p>
                    </li>
                    <li>
                        <p class="fragment" data-fragment-index="2"> Beer </p>
                    </li>
                    <li>
                        <p class="fragment" data-fragment-index="3"> Suave.IO </p>
                    </li>
                    <li>
                        <p class="fragment" data-fragment-index="4"> Meditation </p>
                    </li>
                </ol>
            </section>

            <!-- Slide 4: RoR -->
            <section>
                <section>
                    <h4> Railway Oriented Programming </h4>
                </section>

                <section>
                    <h4> Exceptions, Exceptions Everywhere </h4>
                    <img src="media/DivideByZero.gif" class="center">
                </section>

                <section>
                    <h4> What is ROP? </h4>
                    <p class="fragment" data-fragment-index="1"> Clean </p>
                    <p class="fragment" data-fragment-index="2"> Functional </p>
                    <p class="fragment" data-fragment-index="3"> Robust </p>
                    <p class="fragment" data-fragment-index="4"> Way of Dealing with the Unhappy Path </p>
                </section>

                <section>
                    <h4> The Model </h4>
                </section>

                <section>
                    <h4> Bind [ >>= ] </h4>
                </section>

                <section>
                    <h4> Switch [ >=> ] </h4>
                </section>

            </section>

            <!-- Slide 5: Tired Hands Fun Fun -->
            <section>
                <section>
                    <h4> Tired Hands Fun Fun </h4>
                    <img src="media/purplehaze.jpg" style="text-align: center;" />
                </section>

                <section>
                    <h4> Tired Hands Fun Fun </h4>
                    <img src="media/beertimer.gif" style="text-align: center;" />
                </section>

                <section>
                    <h4> Timer Callback [ Happy Path ] </h4>
                    <ol>

                        <li>
                            <p class="fragment" data-fragment-index="1"> Scrape </p>
                        </li>

                        <li>
                            <p class="fragment" data-fragment-index="2"> Compare </p>
                        </li>

                        <li>
                            <p class="fragment" data-fragment-index="3"> Try Alert </p>
                        </li>

                    </ol>

                    <div class="fragment" data-fragment-index="4">
                        <pre><code data-trim data-noescape> 
                            scrapeWebsiteToCreateBeerInfo 
                            >=> compareWithPreviousBeerInfo
                            >=> tryAlertByText 
                        </pre></code>
                    </div>
                </section>

                <section>
                    <h4> Errors / No-Ops [ Unhappy Path ] </h4>
                    <ol>
                        <li>
                            <p class="fragment" data-fragment-index="1"> Scrape - Web Errors </p>
                        </li>

                        <li>
                            <p class="fragment" data-fragment-index="2"> Compare - I/O Errors </p>
                        </li>

                        <li>
                            <p class="fragment" data-fragment-index="3"> Alert - API Errors </p>
                        </li>

                        <li>
                            <p class="fragment" data-fragment-index="4"> No Difference Found </p>
                        </li>
                    </ol>
                    <div class="fragment" data-fragment-index="5">
                        <pre><code data-trim data-noescape> 
                            type UnhappyPathMessages =
                                | WebError of string
                                | IOError  of string
                                | APIError of string
                                | NoDifferenceFound
                        </pre></code>
                    </div>
                </section>

                <section>
                    <h4> ROP View </h4>
                    <img src="media/BeerFunFun.png" />
                </section>

                <section>
                    <h4> Libraries Used </h4>
                    <p> Chiron for JSON </p>
                    <p> Loggary for Logging </p>
                    <p> C# Twilio API </p>
                </section>

                <section>
                    <h4> Next Steps </h4>
                    <ul>
                        <li>
                            <p> Deploy as an Azure Function </p>
                        </li>
                        <li>
                            <p> Manayunk Brewery </p>
                        </li>
                        <li>
                            <p> Distribution of Updates -> Machine Learning </p>
                        </li>
                    </ul>
                </section>
            </section>

            <!-- Slide 6: Suave.IO -->
            <section>
                <section>
                    <h4> Suave.IO </h4>
                </section>

                <section>
                    <img src="media/SuaveLogo.gif">
                    <p class="fragment" data-fragment-index="1"> Is a ..
                        <p class="fragment" data-fragment-index="2"> Non-Blocking, </p>
                    </p>
                    <p class="fragment" data-fragment-index="3"> Lightweight, </p>
                    <p class="fragment" data-fragment-index="4"> Functional-First, </p>
                    <p class="fragment" data-fragment-index="5"> F# Web Development Library </p>
                </section>

                <section>
                    <h4> Web-Server Function </h4>
                    <img src="media/httpRequestResponse.png" />
                </section>

                <section>
                    <h4> Web-Server Function </h4>
                    <img src="media/client-server.png" />
                    <div class="fragment" data-fragment-index="2">
                        <pre><code data-trim data-noescape style="text-align: center;"> 
                            Request -> Response option
                            Request -> Async< Response option > 
                        </pre></code>
                    </div>
                </section>

                <section>
                    <h4> Simplified Suave Types - I </h4>
                    <div class="fragment" data-fragment-index="1">
                        <p> Request </p>
                        <pre><code data-trim data-noescape style="text-align: center;"> 
                            type RequestType = GET | POST | .. </br> type Request = { Route : string; Type : RequestType }
                        </pre></code>
                    </div>

                    </br>

                    <div class="fragment" data-fragment-index="2">
                        <p> Response </p>
                        <pre><code data-trim data-noescape style="text-align: center;"> 
                            type StatusCode = int </br>type Response = { Content : string; StatusCode : StatusCode }
                        </pre></code>
                    </div>
                </section>

                <section>
                    <h4> Simplified Suave Types - II </h4>

                    <div class="fragment" data-fragment-index="1">
                        <p> Context </p>
                        <pre><code data-trim data-noescape style="text-align: center;"> 
                            type Context = { Request : Request; Response : Response }
                        </pre></code>
                    </div>

                    </br>

                    <div class="fragment" data-fragment-index="2">
                        <p> Async Context </p>
                        <pre><code data-trim data-noescape style="text-align: center;"> 
                            Context -> Async< Context > 
                        </pre></code>
                    </div>

                    </br>

                    <div class="fragment" data-fragment-index="3">
                        <p> Option Based Async Context </p>
                        <pre><code data-trim data-noescape style="text-align: center;"> 
                            Context -> Async< Context option > 
                        </pre></code>
                    </div>
                </section>

                <section>
                    <h4> Simplified Suave Types Combined </h4>

                    <div class="fragment" data-fragment-index="1">
                        <pre><code data-trim data-noescape style="text-align: center;"> 
                            type WebPart = Context -> Async< Context option > 
                        </pre></code>
                    </div>
                </section>

                <section>
                    <h4> Web-Part Combinators </h4>
                    <pre item-width="900"><code data-trim> 
                    let compose webPart1 webPart2 context : WebPart = 
                        async {
                            let! firstResult = webPart1 context
                            match firstResult with
                            | None   -> return None
                            | Some f ->
                                let! secondContextResult = webPart2 f 
                                return secondContextResult
                        }

                    let (>=>) compose 
                    </pre></code>
                </section>

                <section>
                    <h4> ROP View </h4>
                    <img src="media/SuaveROPView.png" style="text-align: center;" />
                </section>

                <section>
                    <h4> A Suave Web-Part Example </h4>
                    <div class="fragment" data-fragment-index="1">
                        <pre><code data-trim data-noescape> 
                            let OK content context : WebPart =
                                let response = { Content : content; StatusCode = 200 }
                                { context with Response = response } 
                                |> Some
                                |> async.Return
                        </pre></code>
                    </div>

                    </br>

                    <div class="fragment" data-fragment-index="2">
                        <p> Combined: </p>
                        <pre><code data-trim data-noescape style="text-align:center;"> 
                        ( OK "All" ) >=> ( OK "Your" ) >=> ( OK "Base" ) ...
                        </pre></code>
                    </div>
                </section>

                <section>
                    <h4> Filters </h4>

                    <div class="fragment" data-fragment-index="1">
                        <pre><code data-trim data-noescape> 
                            GET    >=> path "/somePath" >=> OK "GET"
                            POST   >=> path "/somePath" >=> OK "POST" 
                            PUT    >=> path "/somePath" >=> OK "PUT"
                            DELETE >=> path "/somePath" >=> OK "DELETE"
                            HEAD   >=> path "/somePath" >=> OK "HEAD"
                        </pre></code>
                    </div>

                    <div class="fragment" data-fragment-index="2">
                        <p> Remember.. </p>
                        <pre><code data-trim data-noescape>
                            type RequestType = GET | POST | .. </br>type Request = { Route : string; Type : RequestType }
                        </pre></code>
                    </div>
                </section>

                <section>
                    <h4> From Web-Parts to Web Applications </h4>
                    <pre><code data-trim data-noescape>
                        let app : WebPart = choose [  
                            GET  >=> path "/resource1" >=> OK "r1: GET Success"
                            POST >=> path "/resource1" >=> OK "r1: POST Success"
                            path "/resource2" >=> choose [
                                GET >=> OK "r2: GET Success"
                                POST >=> OK "r2: POST Success"
                            ]
                        ]

                        // Behind the scenes..
                        execute context app 
                    </pre></code>
                </section>
            </section>

            <!-- Slide 7: Meditation Fun Fun -->
            <section>
                <section>
                    <h4> Meditation Fun Fun </h4>
                </section>

                <section>
                    <h4> Rest Resource </h4>
                </section>
            </section>

            <section>
                <h4> Talk Inspired by: </h4>
                <p class="fragment" data-fragment-index="1"><a href="http://www.bit.ly/railwayorientedprogramming"> Scott Wlaschin's Railway Oriented Programming </a></p>
                <p class="fragment" data-fragment-index="2"><a href="http://products.tamizhvendan.in/fsharp-applied/"> Tamizhvedhan's F# Applied </a></p>
                <p class="fragment" data-fragment-index="3"> Tired Hand's Awesome Beer Selection </p>
                <p class="fragment" data-fragment-index="4"> Meditation </p>
            </section>

            <!-- Slide 8: Thank you! -->
            <section>
                <h4> Thank you! </h4>
                <p> Questions? </p>
            </section>

        </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
        // More info about config & dependencies:
        // - https://github.com/hakimel/reveal.js#configuration
        // - https://github.com/hakimel/reveal.js#dependencies
        Reveal.initialize({
            dependencies: [{
                src: 'plugin/markdown/marked.js'
            }, {
                src: 'plugin/markdown/markdown.js'
            }, {
                src: 'plugin/notes/notes.js',
                async: true
            }, {
                src: 'plugin/highlight/highlight.js',
                async: true,
                callback: function() {
                    hljs.initHighlightingOnLoad();
                }
            }]
        });
    </script>
</body>

</html>